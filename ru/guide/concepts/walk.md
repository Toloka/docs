# Сбор офлайн-данных

{% include [deprecate](../../_includes/deprecate.md) %}

{% note tip %}

Сначала запустите проект в [Песочнице]({{ sandbox }}). Так вы сможете избежать ошибок и потраченных средств, если окажется, что ваше задание не работает.

{% endnote %}

Пешеходные (полевые) задания исполнители делают в мобильном приложении для [Android]({{ android-app }}) и для [iOS]({{ ios-app }}). Они получают задание с точкой на карте, куда нужно прийти и проверить наличие чего-либо и сфотографировать.

Возможно, для вашего задания нужны дополнительные проекты, например предварительная проверка датасета или проверка ответов исполнителей. Подробнее об этом читайте в разделе [Декомпозиция задания](solution-architecture.md).

Возможно, для вашего проекта нужны дополнительные настройки, например, добавление новой кнопки со сценарием выполнения или добавление блока с прикреплением файлов. Подробнее об этом читайте в разделе [Примеры кастомизации](advanced-features.md).

Предположим, вам нужно получить фотографии фасада организации с вывеской.

Для этого создадим такое задание: исполнителю необходимо будет найти заданную организацию, загрузить не менее одной фотографии ее фасада с вывеской.

Чтобы запустить задания и получить ответы:

1. [Создайте проект](#project)
1. [Создайте пул заданий](#pool)
1. [Загрузите задания](#tasks_upload)
1. [Запустите пул и получите результаты](#launch)

## Создайте проект {#project}

{% include [toloka-requester-source-project-def](../_includes/toloka-requester-source/id-toloka-requester-source/project-def.md) %}

#### В интерфейсе:

1. Выберите пресет:

    1. {% include [toloka-requester-source-create-project](../_includes/toloka-requester-source/id-toloka-requester-source/create-project.md) %}

    1. {% include [toloka-requester-source-template-saptial-crowdsourcing](../_includes/toloka-requester-source/id-toloka-requester-source/template-saptial-crowdsourcing.md) %}

1. Заполните общую информацию:

    1. Дайте проекту понятное название и краткое описание. Их увидят исполнители в списке доступных заданий.

    1. По желанию добавьте **Приватный комментарий**.

    1. Нажмите **Сохранить**.

1. {% include [toloka-requester-source-edit-interface](../_includes/toloka-requester-source/id-toloka-requester-source/edit-interface.md) %}

    {% list tabs %}

    - Конструктор шаблонов

      1. {% include [toloka-requester-source-interface-def](../_includes/toloka-requester-source/id-toloka-requester-source/interface-def.md) %}

          Для этого проекта воспользуйтесь {% if locale == "ru-ru" %}[готовым кодом](https://ya.cc/t/qAIe3yri3tvkJj){% endif %}{% if locale == "en-com" %}[ready-made code](https://ya.cc/t/shEN6heQ3tvkU2){% endif %}, где уже настроена валидация и внешний вид задания.

          Исполнитель не сможет отправить задание, если:

          - его геолокация будет отличаться от заданной более, чем на 50 метров;
          - не загрузит хотя бы одну фотографию организации.

      1. {% include [toloka-requester-source-tb-input-output_1](../_includes/toloka-requester-source/id-toloka-requester-source/tb-input-output_1.md) %}

          В данном проекте:

          - Поля входных данных:

              - `name` — строка с названием объекта;
              - `position` — координаты точки, куда должен прийти исполнитель.

          - Поля выходных данных:

              - `photo` — массив файлов, фотографии объекта, которые загрузит исполнитель;
              - `comment` — строка с комментарием, который может написать исполнитель;
              - `worker_coordinates` — координаты исполнителя в момент исполнения задания, с включенной опцией **Текущее положение**.

      1. Блок **Настройки отображения пешеходных заданий** используется, чтобы помочь исполнителю отличить одно задание от другого, когда он выберет задание на карте. В данном проекте поля **Формат заголовка** и **Формат короткого описания** содержат ссылки на поля входных данных, чтобы показывать координаты точки и ее название. Вы можете оставить эти поля без изменений или написать какое-нибудь другое пояснение.

      1. Нажмите **Сохранить**.

    - Редактор HTML/CSS/JS

      1. {% include [toloka-requester-source-interface-html-block](../_includes/toloka-requester-source/id-toloka-requester-source/interface-html-block.md) %}

      1. Определите, какие объекты будете передавать исполнителю и получать от него в ответ. Для этого необходимо создать поля входных и выходных данных в блоке **Спецификация данных**.

          {% cut "Что такое входные и выходные данные?" %}

          {% include [toloka-requester-source-input-data](../_includes/toloka-requester-source/id-toloka-requester-source/input-data.md) %}

          {% include [toloka-requester-source-output-data](../_includes/toloka-requester-source/id-toloka-requester-source/output-data.md) %}

          Подробнее о [полях входных и выходных данных](incoming.md).

          {% endcut %}

          {% include [walk-input-output-data](../_includes/concepts/walk/id-walk/input-output-data.md) %}

      1. Блок **Настройки отображения пешеходных заданий** используется, чтобы помочь исполнителю отличить одно задание от другого, когда он выберет задание на карте. В данном проекте поля **Формат заголовка** и **Формат короткого описания** содержат ссылки на поля входных данных, чтобы показывать координаты точки и ее название. Вы можете оставить эти поля без изменений или написать какое-нибудь другое пояснение.

      1. Нажмите кнопку ![](../_images/tutorials/image-segmentation/preview-button.svg) {% if locale == "ru-ru" %}**Предпросмотр задания**{% endif %}{% if locale == "en-com" %}**Preview task**{% endif %}, чтобы увидеть получившееся задание.

          {% note info %}

          В предварительном просмотре проекта отображается одно задание со стандартными данными. Количество заданий на странице вы сможете настроить далее.

          {% endnote %}

      1. {% include [toloka-requester-source-exit-preview](../_includes/toloka-requester-source/id-toloka-requester-source/exit-preview.md) %}

      1. Нажмите **Сохранить**.

    {% endlist %}

1. Напишите краткую и ясную инструкцию. Опишите в ней, что надо сделать, и приведите примеры.

    Вы можете подготовить инструкцию в формате HTML и вставить ее в редактор. Чтобы переключиться в режим HTML, нажмите **<>**.

    Инструкция для пешеходных заданий должна хорошо читаться на экране мобильного телефона.

1. {% include [toloka-requester-source-end-edit-new-interface](../_includes/toloka-requester-source/id-toloka-requester-source/end-edit-new-interface.md) %}

Подробнее читайте в разделе [Проект](project.md).

## Добавьте пул заданий {#pool}

Пул — это набор оплачиваемых заданий, которые одновременно выдаются исполнителям.

1. Откройте проект и нажмите **Добавить пул**.

1. Дайте пулу любое удобное название и описание. Они доступны только вам, исполнитель будет видеть только название и описание проекта.

1. В блоке **Аудитория** добавьте **Фильтры** для отбора исполнителей. Чтобы ваши задания были доступны в мобильных приложениях Толоки исполнителям, владеющих русским языком и находящихся в Москве, установите язык и регион.

    ![](../_images/tutorials/walk/region-by-ip.png)

1. В блоке **Цена** установите цену за задание, например 0,2 $. Для пешеходных заданий всегда добавляйте одно задание на страницу.

    {% cut "Что такое страница заданий?" %}

    На одной странице может отображаться одно или несколько заданий. Если задания простые, то можно добавлять 10–20 заданий на одну страницу. Не рекомендуем создавать длинные страницы, поскольку это снизит скорость загрузки данных у исполнителя.

    Исполнитель получит оплату, только если выполнил все задания на странице.

    Количество заданий на странице вы определите при [загрузке заданий](#smart-mixing).

    {% endcut %}

    {% cut "Как определить справедливую цену?" %}

    Общее правило формирования цены — чем больше времени исполнитель тратит на выполнение, тем выше цена.

    Вы можете зарегистрироваться в Толоке как исполнитель и узнать, сколько платят другие заказчики за задания.

    {% endcut %}

1. В блоке **Контроль качества** установите **Перекрытие** — количество исполнителей, которые должны выполнить задание. Для пешеходных заданий, как правило, 1.

1. В блоке **Контроль качества** включите опцию **Отложенная приемка** и укажите количество дней на проверку для параметра **Срок проверки**. Например, 7.

    {% cut "Что такое отложенная приемка?" %}

    [Отложенная приемка](offline-accept.md) позволяет вам просматривать [выполненные страницы заданий](../../glossary.md#completed-tasks) перед тем, как принять их и заплатить исполнителю. Задания, выполненные в несоответствии с инструкцией, можно отклонять. Максимальный срок проверки устанавливается в поле **Срок проверки**.

    {% endcut %}

1. В блоке **Дополнительные настройки** укажите **Время** на выполнение страницы заданий. Его должно быть достаточно для того, чтобы добраться до места, найти указанную точку и загрузить фотографии. Для пешеходных заданий рекомендуем устанавливать сутки — 86 400 секунд.

1. Сохраните пул.

## Загрузите задания {#tasks_upload}

{% include [toloka-requester-source-tsv-file](../_includes/toloka-requester-source/id-toloka-requester-source/tsv-file.md) %}

1. Нажмите кнопку **Загрузить**. В открывшемся окне вы можете скачать шаблон файла.

1. Добавьте в него входные данные. Заголовок столбца с входными данными содержит слово `INPUT`. Для пешеходных заданий также нужно указать широту `AI:latitude` и долготу `AI:longitude` каждой точки. Координаты можно уточнить, например, в [Яндекс Картах]({{ ya-maps-object-search }}).

    ![](../_images/tutorials/walk/squirrel_tsv.png)

1. Загрузите задания.

1. Выберите {% if locale == "ru-ru" %}**Указать вручную**{% endif %}{% if locale == "en-com" %}**Set manually**{% endif %} и установите значение 1 в поле {% if locale == "ru-ru" %}**Кол-во заданий на странице**{% endif %}{% if locale == "en-com" %}**Number of tasks per suite**{% endif %}.

1. Нажмите кнопку {% if locale == "ru-ru" %}**Разделить задания на страницы**{% endif %}{% if locale == "en-com" %}**Combine tasks into suites**{% endif %}.

## Запустите пул и получите результаты {#launch}

1. Запустите пул, нажав кнопку ![](../_images/other/b-start-pool.svg).

1. Следите за выполнением в блоке **Статистика пула**.

1. Как только получены первые результаты, вы можете начинать проверку.

    Чтобы проверить задания, откройте пул и нажмите **Скачать результаты**. Чтобы скачать вложения, нажмите кнопку рядом ![Выпадающее меню](../_images/other/drop-down.svg) и выберите **Скачать вложения**.

    {% note info %}

    По истечении установленного срока проверки все ответы будут автоматически приняты вне зависимости от качества ответа.

    {% endnote %}

## Решение проблем {#troubleshooting}

{% cut "Можно ли в полевом задании ограничить источник получения фото только камерой, чтобы исполнитель никак не мог загрузить фото откуда-то ещё?" %}

Чтобы при нажатии на кнопку загрузки картинки запускалась камера, а не галерея, укажите в компоненте **Кнопка для загрузки картинки **`camera=true`.

В мобильных приложениях исполнители могут прикреплять фотографии из дефолтной галереи (iOS) или через Google photo (Android). Чтобы ограничить возможность добавления картинок из сети, укажите в компоненте `requiredCoordinates=true`. В этом случае система не позволит воспользоваться картинками без геотегов.

[Подробнее о настройке компонента для загрузки картинки](t-components/upload-picture.md) .

{% endcut %}

{% cut "Как проверить отображение задания в мобильном приложении Толоки?" %}

Чтобы проверить, как выглядит задание на экране мобильного телефона, можно переключиться в режим эмуляции в браузерах Chrome или Safari и отредактировать блок CSS.

Также вы можете воспользоваться мобильной версией сендбокса. Чтобы получить к ней доступ, напишите в службу поддержки.

{% endcut %}

{% cut "Почему мой проект не доступен в мобильной версии Толоки?" %}

Задания в пулах по умолчанию доступны для веб-версии Толоки и мобильного приложения. Проверьте настройки пула, возможно у вас настроен [фильтр](filters.md): `Клиент = Веб-версия Толоки`

{% endcut %}

{% cut "Как сделать так, чтобы задание было доступно не только с компьютера, но и с мобильных устройств?" %}

Задания в пулах по умолчанию доступны для веб-версии Толоки и мобильного приложения. Проверьте настройки пула, возможно у вас настроен [фильтр](filters.md): `Клиент = Мобильная Толока`

{% endcut %}

{% include [contact-support](../_includes/contact-support.md) %}