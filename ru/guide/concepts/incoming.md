# Входные и выходные данные

{% include [deprecate](../../_includes/deprecate.md) %}

{% include [toloka-requester-source-html-editor-tb-spec](../_includes/toloka-requester-source/id-toloka-requester-source/html-editor-tb-spec.md) %}

В **Спецификации** вы задаете параметры [входных и выходных данных](../../glossary.md#input-output-data). Эти настройки будут действовать для всех заданий в [проекте](../../glossary.md#project).

Добавьте в спецификацию поля для всех данных, которые используются в задании или нужны вам в результатах. При [настройке интерфейса](spec.md) ссылайтесь на эти поля.

Не дублируйте входные данные в выходных — в результатах вы получите все данные, включая входные.

## Как редактировать спецификацию {#manual-setting}

{% note info %}

Редактирование спецификации доступно только при включенной опции {% if locale == "ru-ru" %}**Настроить спецификацию вручную**{% endif %}{% if locale == "en-com" %}**Define data specification manually**{% endif %}.

{% endnote %}

Вы можете изменить спецификацию в настройках проекта Толоки двумя способами: в обычном режиме или в режиме JSON. Режим JSON дает больше возможностей: вы можете делать скрытыми входные данные и использовать регулярные выражения для валидации выходных данных.

{% list tabs %}

- Обычный режим

  Чтобы добавить поле в обычном режиме, нажмите кнопку **Добавить поле**.

  Чтобы редактировать существующее поле, наведите курсор на поле и нажмите кнопку ![](../_images/edit.svg).

- Режим JSON

  Для переключения режима нажмите кнопку ![](../_images/code.svg). Примеры полей:

  #### Примеры полей:

  {% cut "Текст в разных форматах" %}

  - Строка определенной длины

      ```json
      "my_string": {
      "type": "string",
      "required": true,
      "min_length": 10,
      "max_length": 100
      }
      ```

  - Только русские буквы и цифры

      ```json
      "my_ru_string": {
      "type": "string",
      "required": true,
      "min_length": 10,
      "max_length": 100,
      "pattern": "[а-яА-Я0-9]+"
      }
      ```

  - Только латинские буквы и цифры

      ```json
      "my_en_string": {
      "type": "string",
      "required": true,
      "min_length": 10,
      "max_length": 100,
      "pattern": "[a-zA-Z0-9]+"
      }
      ```

  - Буквы и символы без цифр

      ```json
      "my_number_string": {
      "type": "string",
      "required": true,
      "min_length": 10,
      "max_length": 100,
      "pattern": "[^0-9]+"
      }
      ```

  - Ссылка с определенного сайта

      ```json
      "my_url": {
      "type": "string",
      "required": true,
      "pattern": "(?:http(?:s)?:\\/\\/)?(?:[a-zA-z-]+(\\.)+)*(?:yandex\\.ru){1}(\\/|\\/[a-zA-Z-\\._~:/\\?#\\[\\]@!\\$&'\\(\\)\\*\\+,;=]+)?"
      }
      ```

  - Номер телефона с символами `+`, `-` и пробелом

      ```json
      "my_phone_string": {
      "type": "string",
      "required": true,
      "pattern": "\\+?[0-9\\s-]{4,}"
      }
      ```

  - Электронная почта с символами `@`, `-` и `.`

      ```json
      "my_mail_string": {
      "type": "string",
      "required": true,
      "pattern": "[a-zA-Z]{1}[a-zA-Z0-9\\.\\-_]+@[a-zA-Z0-9\\.\\-_]+\\.[a-zA-Z]{2,}"
      }
      ```

  - Месяц{% if locale == "ru-ru" %}

      ```json
      "my_month_string": {
      "type": "string",
      "required": true,
      "allowed_values": ["январь", "февраль", "март", "апрель", "май", "июнь", "июль", "август", "сентябрь", "октябрь" "ноябрь", "декабрь"]
      }
      ```

      {% endif %}{% if locale == "en-com" %}

      ```json
      "my_month_string": {
      "type": "string",
      "required": true,
      "allowed_values": ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October" "November", "December"] }
      ```

      {% endif %}

  {% endcut %}

  {% cut "Ссылка" %}

  ```json
  "my_url": {
      "type": "url",
      "required": true
  }
  ```

  {% endcut %}

{% cut "Логический тип данных" %}

  ```json
  "my_boolean": {
      "type": "boolean",
      "required": true
  }
  ```

  {% endcut %}

{% cut "Числа" %}

  - Целое число из указанного диапазона:

      ```json
      "my_integer": {
      "type": "integer",
      "required": true,
      "min_value": 1,
      "max_value": 100
      }
      ```

  - Целое число со списком допустимых значений:

      ```json
      "my_integer": {
      "type": "integer",
      "required": true,
      "allowed_values": [10, 20, 30]
      }
      ```

  - Дробное число:

      ```json
      "my_float": {
      "type": "float",
      "required": true,
      "min_value": 10.11,
      "max_value": 65.51
      }
      ```

  - Число с 0, 1 или 2 знаками после запятой.

      Для этого надо выбрать тип **строка** и проверять с помощью регулярного выражения. Обратите внимание, что разделитель дробной части — запятая:

      ```json
      "my_mail_string": {
      "type": "string",
      "required": true,
      "pattern": "^([0-9]+)(,([0-9]){1,2})?$"
      }
      ```

  {% endcut %}

  {% cut "Файл" %}

  ```json
  "my_file": {
      "type": "file",
      "required": true
  }
  ```

  {% endcut %}

  {% cut "Массив файлов" %}

  ```json
  "my_file_array": {
      "type": "array_file",
      "required": true,
      "max_size": 5
  }
  ```

  {% endcut %}

  {% cut "Географические координаты" %}

  ```json
  "my_coordinates": {
      "type": "coordinates",
      "required": true
  }
  ```

  {% endcut %}

  {% cut "JSON" %}

  ```json
  "my_json": {
      "type": "json",
      "required": true
  }
  ```

  {% endcut %}

  {% cut "Скрытое поле" %}

  Строка, к которой исполнитель не сможет получить доступ:

  ```json
  "my_string": {
      "type": "string",
      "hidden": true
  }
  ```

  {% endcut %}

{% endlist %}

{% cut "Пояснения к настройке полей" %}

#|
||**Параметр**| **Параметр в JSON** | **Описание**||
||{% if locale == "ru-ru" %}**Название**{% endif %}{% if locale == "en-com" %}**Name**{% endif %} | `id` | Идентификатор поля. Допустимы латинские буквы, цифры, дефис и нижнее подчеркивание.||
||{% if locale == "ru-ru" %}**Тип**{% endif %}{% if locale == "en-com" %}**Type**{% endif %} | `type` | Тип данных:

- строка — `string`;
- ссылка — `url`;
- логический — `boolean`;
- число — `number`;
- дробное число — `float`;
- файл — `file`;
- географические координаты — `coordinates`;
- объект JSON — `json`.

Для массивов в режиме JSON к типу добавляется префикс `array_`. Например: `array_file`.||
||{% if locale == "ru-ru" %}**Обязательное поле**{% endif %}{% if locale == "en-com" %}**Required**{% endif %} | `required` | Обязательность объекта при загрузке заданий для входных данных.

Обязательность ответа исполнителя для выходных данных.

По умолчанию поле необязательное — `false`.||
||{% if locale == "ru-ru" %}**Скрытое поле**{% endif %}{% if locale == "en-com" %}**Hidden**{% endif %} | `hidden` | Позволяет скрыть данные от исполнителя. Если этого не сделать, исполнители могут получить значение поля программно. Параметр можно настроить в режиме JSON.

Например, вы можете скрыть идентификатор `assigment_id`, который вам понадобится при выполнении [отложенной приемки](../../glossary.md#assignment-review) в отдельном проекте.

По умолчанию поле открытое — `false`.

{% note warning %}

Скрытые поля недоступны в интерфейсе задания, даже через JS или код шаблона в конструкторе.

{% endnote %}

||
||{% if locale == "ru-ru" %}**Массив**{% endif %}{% if locale == "en-com" %}**Array**{% endif %} | `array_<тип>` | Массив объектов одного типа. Используется, например, для загрузки нескольких фотографий исполнителем.

В режиме JSON массив — это отдельный тип данных. Например: `"type": "array_file"`.||
||{% if locale == "ru-ru" %}**Мин. элементов**{% endif %}{% if locale == "en-com" %}**Min size**{% endif %} | `min_size` | Минимальное число элементов в массиве.||
||{% if locale == "ru-ru" %}**Макс. элементов**{% endif %}{% if locale == "en-com" %}**Max size**{% endif %} | `max_size` | Максимальное число элементов в массиве.||
||{% if locale == "ru-ru" %}**Допустимые значения**{% endif %}{% if locale == "en-com" %}**Allowed values**{% endif %} | `allowed_values` | Допустимые значения для строк, дробных и целых чисел, логического типа данных.||
||{% if locale == "ru-ru" %}**Мин. длина**{% endif %}{% if locale == "en-com" %}**Min length**{% endif %} | `min_length` | Минимальная длина строки.||
||{% if locale == "ru-ru" %}**Макс. длина**{% endif %}{% if locale == "en-com" %}**Max length**{% endif %} | `max_length` | Максимальная длина строки||
||{% if locale == "ru-ru" %}**Мин. значение**{% endif %}{% if locale == "en-com" %}**Min value**{% endif %} | `min_value` | Минимальное значений для дробных и целых чисел.||
||{% if locale == "ru-ru" %}**Макс. значение**{% endif %}{% if locale == "en-com" %}**Max value**{% endif %} | `max_value` | Максимальное значений для дробных и целых чисел.||
||{% if locale == "ru-ru" %}**Текущее положение**{% endif %}{% if locale == "en-com" %}**Current location**{% endif %} | `current_location` | Сохранение текущих координат исполнителя (`true`/`false`). Только для типа данных `coordinates`. Используется в заданиях для мобильного приложения.

По умолчанию `false`.||
||{% if locale == "ru-ru" %}**Шаблон**{% endif %}{% if locale == "en-com" %}**Pattern**{% endif %} | `pattern` | Регулярное выражение, которому должна соответствовать строка. Параметр можно настроить в режиме JSON.||
|#

{% endcut %}

## Рекомендации {#recomendations}

- Если вы редактируете обязательные поля, изменения применятся только к новым [пулам](../../glossary.md#pool) заданий. Например, если вам пришлось исправить ошибку в проекте, [клонируйте пул](pool-main.md) или [создайте новый](pool-main.md). Существующие пулы заданий будут работать в соответствии со старой версией проекта.

- В выходных данных используйте проверку значений и не забывайте помечать поле обязательным, если исполнитель всегда должен заполнить его.
- Скрытые поля нужны только заказчикам и недоступны в интерфейсе задания. Значения скрытых полей невозможно использовать ни в JS-коде, ни в конструкторе шаблонов.

    Например, вы передаете в задании служебные данные товара, которые не нужны исполнителям: артикул или номер партии. Или вы модерируете комментарии и вам нужны в результатах персональные данные авторов для последующей обработки данных, но исполнители не должны иметь к ним доступ.

    Чтобы создать скрытое поле, добавьте его в спецификацию самостоятельно, затем в режиме JSON добавьте к этому полю параметр `"hidden": true`. Эти действия надо выполнять в Толоке при настройке проекта. Скрытое поле сохранится при повторной генерации спецификации с помощью Конструктора шаблонов.

## Что дальше {#what_next}

- [Создайте пул заданий в проекте](pool-main.md).
- Узнайте больше про настройку проекта:

    - [Написание инструкции](instruction.md).
    - [Интерфейс задания](spec.md).
    - [Адаптировать задание для мобильных устройств](mobile.md).
    - [Настройка контроля качества](project-qa.md).
    - {% if locale == "ru-ru" %}[Статья в блоге Толоки.]({{ toloka-blog-edit-templates }}){% endif %}

## Решение проблем {#troubleshooting}

{% cut "Как вставлять вызов функции, работающий при клике на картинку в задании?" %}

Пример шаблона задания по выделению групп изображений вы найдете по [ссылке]({{ selection-of-images-groups }}). Входные и выходные данные, а также фрагмент инструкции — в комментариях к проекту.

{% endcut %}

{% cut "Как сделать маску на поле ввода: тип поля дата — дд.мм.гггг; ИНН — только цифры, количество 10 или 12?" %}

Для проверки формата ввода данных можно использовать тип выходного поля с указанием допустимых или минимальных/максимальных значений. Например, для ИНН создайте выходное поле с типом «строка» и укажите минимальную и максимальную длину (например, 10 и 12). Для более сложной проверки введённых данных в шаблоне, используйте RegExp.

Для ввода даты можно добавить в интерфейс задания календарь. Пример календаря вы найдете [здесь]({{ how-to-insert-a-calendar }}).

{% endcut %}

{% cut "Нужно ли подгонять все изображения для задания под один размер, или они могут быть разные?" %}

Размеры изображений могут быть разные.

{% endcut %}

{% cut "Если в выходных данных проекта возможно любое число, от 1 до 999999, возможно ли указать диапазон?" %}

Диапазон не будет являться фиксированным значением.

{% endcut %}

{% cut "Как показывать исполнителям два разных варианта текста?" %}

Если вы передаёте тексты во входные данные, то достаточно загрузить в пул 2 разных задания: в одном из них в поле `INPUT: <имя входного поля>` вы передадите текст № 1, в другом — текст № 2.

Если текст в самом шаблоне задания, в блоке HTML, то нужно клонировать проект. Чтобы исполнитель мог сделать только одно задание в вашем проекте, используйте правило [Выполненные задания](submitted-answers.md). Можно назначить навык или заблокировать исполнителя, после того, как он отправит один ответ.

{% endcut %}

{% include [contact-support](../_includes/contact-support-help.md) %}